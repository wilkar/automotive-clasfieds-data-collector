name: Docker build and test

on: [push]

jobs:
  build:
   runs-on: ubuntu-latest
    
   steps:
    - uses: actions/checkout@v3
    - name: Build Docker image
      run: docker build -t app .
    - name: Run isort
      run: docker run app poetry run isort . --check --profile=black
    - name: Run black
      run: docker run app poetry run black . --check
    - name: Run tests
      run: docker run app poetry run pytest